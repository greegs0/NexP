<div class="project-form-page">
  <h1>Modifier le projet</h1>

  <%= form_with(model: @project, local: true) do |f| %>
    <% if @project.errors.any? %>
      <div class="error-messages">
        <h2><%= pluralize(@project.errors.count, "erreur") %> empêche la modification du projet :</h2>
        <ul>
          <% @project.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= f.label :title, "Titre du projet *" %>
      <%= f.text_field :title, class: "form-control", required: true %>
    </div>

    <div class="form-group">
      <%= f.label :description, "Description" %>
      <%= f.text_area :description, class: "form-control", rows: 6 %>
    </div>

    <div class="form-row">
      <div class="form-group">
        <%= f.label :status, "Statut" %>
        <%= f.select :status,
            options_for_select(Project::STATUSES.map { |s| [s.titleize, s] }, @project.status),
            {},
            class: "form-control" %>
      </div>

      <div class="form-group">
        <%= f.label :visibility, "Visibilité" %>
        <%= f.select :visibility,
            options_for_select(Project::VISIBILITIES.map { |v| [v.titleize, v] }, @project.visibility),
            {},
            class: "form-control" %>
      </div>

      <div class="form-group">
        <%= f.label :max_members, "Nombre maximum de membres" %>
        <%= f.number_field :max_members, class: "form-control", min: 1, max: 50 %>
      </div>
    </div>

    <div class="form-group">
      <%= f.label :skill_ids, "Compétences requises" %>
      <%= select_tag 'project[skill_ids][]',
          options_from_collection_for_select(@available_skills, :id, :name, @project.skill_ids),
          { multiple: true, class: "form-control", size: 10 } %>
      <small class="form-text">Maintenez Ctrl (Cmd sur Mac) pour sélectionner plusieurs compétences</small>
    </div>

    <div class="form-row">
      <div class="form-group">
        <%= f.label :start_date, "Date de début" %>
        <%= f.date_field :start_date, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= f.label :end_date, "Date de fin" %>
        <%= f.date_field :end_date, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= f.label :deadline, "Deadline" %>
        <%= f.date_field :deadline, class: "form-control" %>
      </div>
    </div>

    <div class="form-actions">
      <%= f.submit "Mettre à jour", class: "btn btn-primary" %>
      <%= link_to "Annuler", project_path(@project), class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>
